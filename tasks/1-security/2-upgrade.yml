- name: "Security : Upgrade  : Install aptitude before performing any bulk upgrades"
  apt:
    name: ['aptitude', 'python-apt']
    state: present
    update_cache: yes
    install_recommends: no
    force_apt_get: yes
  # At this early stage, we may not have created the real, custom admin account yet,
  # so we may need to specify the remote_user to be root.
  remote_user: "{{ test_user is success | ternary(omit, 'root') }}"

- name: "Security : Upgrade : Upgrade APT to the latest packages"
  apt:
    upgrade: safe
  # At this early stage, we may not have created the real, custom admin account yet,
  # so we may need to specify the remote_user to be root.
  remote_user: "{{ test_user is success | ternary(omit, 'root') }}"
